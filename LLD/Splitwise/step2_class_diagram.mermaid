%% ========================================
%% STEP 2: ADD BASIC RELATIONSHIPS
%% ========================================
%% WHAT WE ADDED: Relationships (arrows) between entities
%% WHY: Entities don't exist in isolation - they connect!
%% ========================================

classDiagram
    %% Core Entities (from Step 1)
    class User {
        <<Entity>>
    }

    class Group {
        <<Entity>>
    }

    class Expense {
        <<Entity>>
    }

    class Transaction {
        <<Entity>>
    }

    %% ========== NEW: RELATIONSHIPS ==========

    %% User to Group: Many-to-Many
    %% A user can be in many groups, a group has many users
    User "member *" -- "*" Group : belongs to >

    %% Group to Expense: One-to-Many
    %% A group has many expenses, an expense belongs to one group
    Group "1" -- "0..*" Expense : contains >

    %% User to Expense: One-to-Many (who paid)
    %% A user can pay for many expenses, an expense is paid by one user
    User "paidBy 1" -- "0..*" Expense : paid by >

    %% Expense to User: Many-to-Many (who owes)
    %% An expense is split among many users, a user is involved in many expenses
    Expense "*" -- "participants *" User : split among >

    %% User to Transaction: Two relationships (payer and payee)
    %% A user can be payer in many transactions
    User "payer 1" -- "0..*" Transaction : pays >
    %% A user can be payee in many transactions
    User "payee 1" -- "0..*" Transaction : receives >

    %% Notes explaining the relationships
    note for User "ðŸ‘¤ USER RELATIONSHIPS\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ Belongs to many Groups (Member)\nâ€¢ Pays for many Expenses\nâ€¢ Participates in many Expenses (owes money)\nâ€¢ Sends many Transactions (as payer)\nâ€¢ Receives many Transactions (as payee)"

    note for Group "ðŸ‘¥ GROUP RELATIONSHIPS\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ Has many Users (Members)\nâ€¢ Contains many Expenses\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nExample: 'Goa Trip' has\n- 3 members (Alice, Bob, Charlie)\n- 10 expenses (hotel, food, etc.)"

    note for Expense "ðŸ’° EXPENSE RELATIONSHIPS\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ Belongs to one Group\nâ€¢ Paid by one User\nâ€¢ Split among many Users\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nExample: 'Dinner â‚¹3000'\n- In group 'Goa Trip'\n- Paid by Alice\n- Split among Alice, Bob, Charlie"

    note for Transaction "ðŸ’¸ TRANSACTION RELATIONSHIPS\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ Has one Payer (who gives money)\nâ€¢ Has one Payee (who receives)\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nExample: 'Bob â†’ Alice â‚¹500'\n- Payer: Bob\n- Payee: Alice"

%% ========================================
%% KEY CONCEPTS:
%% 1-to-Many: One group has many expenses
%% Many-to-Many: Users â†” Groups (needs join table)
%% ========================================
